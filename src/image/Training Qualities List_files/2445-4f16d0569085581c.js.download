"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2445],{25952:function(e,n,t){t.d(n,{h:function(){return m},t:function(){return b}});var r=t(4337),a=t(35250),i=t(95182),s=t.n(i),l=t(1454),o=t(21389);function c(){var e=(0,r._)(["text-xs flex items-center justify-center gap-1"]);return c=function(){return e},e}function d(){var e=(0,r._)(["dark:text-white disabled:text-gray-300 dark:disabled:text-gray-400"]);return d=function(){return e},e}function u(){var e=(0,r._)(["flex-grow flex-shrink-0 tabular-nums"]);return u=function(){return e},e}function f(){var e=(0,r._)(["text-xs inline-flex bg-token-surface-secondary h-8 border rounded border-token-border-medium"]);return f=function(){return e},e}function x(){var e=(0,r._)(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-surface-tertiary"]);return x=function(){return e},e}function h(){var e=(0,r._)(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest"]);return h=function(){return e},e}function m(e){var n=e.currentPage,t=e.onChangeIndex,r=e.length,i=e.className,o=function(e){t(s()(n+e,0,r-1))};return(0,a.jsxs)(g,{className:i,children:[(0,a.jsx)(p,{onClick:function(){return o(-1)},disabled:0===n,children:(0,a.jsx)(l.YFh,{className:"icon-xs"})}),(0,a.jsx)(v,{children:"".concat(n+1," / ").concat(r)}),(0,a.jsx)(p,{onClick:function(){return o(1)},disabled:n===r-1,children:(0,a.jsx)(l.Tfp,{className:"icon-xs"})})]})}var g=o.Z.div(c()),p=o.Z.button(d()),v=o.Z.span(u());function b(e){var n=e.currentPage,t=e.onChangeIndex,r=e.length,i=e.className,o=function(e){t(s()(n+e,0,r-1))};return(0,a.jsxs)(j,{className:i,children:[(0,a.jsx)(y,{onClick:function(){return o(-1)},disabled:0===n,children:(0,a.jsx)(l.YFh,{className:"icon-sm"})}),(0,a.jsx)(w,{children:"".concat(n+1,"/").concat(r)}),(0,a.jsx)(y,{onClick:function(){return o(1)},disabled:n===r-1,children:(0,a.jsx)(l.Tfp,{className:"icon-sm"})})]})}var j=o.Z.div(f()),y=o.Z.button(x()),w=o.Z.span(h())},31731:function(e,n,t){t.d(n,{m:function(){return s}});var r=t(35250),a=t(98359),i=t(70079);function s(e){var n=e.children;return(0,r.jsx)(a.u,{as:i.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:n})}},50362:function(e,n,t){t.d(n,{D2:function(){return I},Vp:function(){return L},ZP:function(){return Z},ze:function(){return O}});var r=t(39324),a=t(70216),i=t(22830),s=t(4337),l=t(35250),o=t(26563),c=t(98359),d=t(57526),u=t(19841),f=t(70079),x=t(99581),h=t(1454),m=t(21389),g=t(1491),p=t(13246),v=t(35265),b=t(23234),j=t(59904),y=t(42798);function w(){var e=(0,s._)(["rounded-lg bg-white ring-1 ring-black/10 dark:bg-gray-800 dark:ring-white/20 shadow-[0_1px_7px_0_rgba(0,0,0,0.03)]"]);return w=function(){return e},e}function k(){var e=(0,s._)(["absolute z-[17] mt-2 flex max-h-60 w-full flex-col overflow-hidden text-base focus:outline-none dark:last:border-0 sm:text-sm md:w-[100%] gizmo:min-w-[250px]"]);return k=function(){return e},e}function N(){var e=(0,s._)(["absolute z-[17] -ml-[1px] flex flex-col gap-2 p-3 sm:p-4"]);return N=function(){return e},e}function C(){var e=(0,s._)(["flex items-center gap-2 truncate"]);return C=function(){return e},e}function _(){var e=(0,s._)(["h-6 w-6 shrink-0"]);return _=function(){return e},e}function M(){var e=(0,s._)(["absolute inset-y-0 right-0 flex items-center pr-5 text-gray-800 dark:text-gray-100"]);return M=function(){return e},e}function T(){var e=(0,s._)(["absolute inset-y-0 right-0 flex items-center pr-3 text-gray-800 dark:text-gray-100"]);return T=function(){return e},e}var I=["confidential","alpha","plus"];function Z(e){var n=e.selectedOptions,t=e.selectedLabel,i=e.onChange,s=e.onAction,c=e.onOpen,d=e.onClose,u=e.dropdownRef,x=(0,a._)(e,["selectedOptions","selectedLabel","onChange","onAction","onOpen","onClose","dropdownRef"]),h=(0,f.useCallback)(function(e){if(e.some(function(e){return"string"==typeof e})){var n=e.find(function(e){return"string"==typeof e});null==s||s(n)}else i(e)},[i,s]);return(0,l.jsx)(o.R,{value:n.map(function(e){return e.value}),multiple:!0,onChange:h,children:function(e){var a=e.open;return(0,l.jsx)(D,(0,r._)({ref:u,selectedLabel:t||"".concat(n.length," selected"),open:a,onOpen:c,onClose:d,multiple:!0},x))}})}var D=(0,f.forwardRef)(function(e,n){var t=e.name,r=e.selectedLabel,a=e.open,i=e.options,s=e.actions,m=e.multiple,w=e.isLoading,k=e.loadingState,N=e.header,C=e.onOpen,_=e.onClose,M=e.theme,T=(0,f.useRef)(null),I=(0,f.useRef)(null),Z=(0,g.oc)(),D=(0,b.Ml)();(0,f.useImperativeHandle)(n,function(){return{open:function(){if(!a){var e;null===(e=T.current)||void 0===e||e.click()}},close:function(){if(a){var e;null===(e=T.current)||void 0===e||e.click()}}}},[a]);var O=w?k||(0,l.jsx)("div",{className:"flex h-[42px] items-center justify-center",children:(0,l.jsx)(y.Z,{})}):(0,l.jsxs)(l.Fragment,{children:[N,(0,l.jsxs)(o.R.Options,{className:"overflow-auto",children:[i.map(function(e,n){return(0,l.jsx)(z,{value:e.value,disabled:e.disabled,theme:M,children:function(n){var t=n.selected,r=n.active;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(A,{children:[e.imageUrl&&(0,l.jsx)(V,{children:(0,l.jsx)(p.Z,{url:e.imageUrl,name:e.title,size:"100%"})}),(0,l.jsxs)("span",{className:(0,u.default)(t&&!m&&"font-semibold","flex h-6 items-center gap-1 text-gray-800 dark:text-gray-100"),children:[e.title,e.tags.map(function(e){return L(e)}),e.customTags]})]}),m&&!e.disabled?(0,l.jsx)(P,{theme:M,selected:t}):t&&(0,l.jsx)(S,{theme:M,icon:"mini"===M?j.HQ:h.UgA}),e.disabled&&(0,l.jsx)(S,{theme:M,icon:d.Z,className:"text-red-700 dark:text-red-500"}),r&&Z&&(0,x.createPortal)((0,l.jsx)(B,{option:e,dropdownRef:I}),document.body)]})}},n)}),null==s?void 0:s.map(function(e,n){return(0,l.jsx)(z,{value:e.id,theme:M,children:function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-gray-800 dark:text-gray-100",children:e.label}),(0,l.jsx)(S,{theme:M,icon:e.icon})]})}},n)})]})]});return(0,l.jsxs)("div",{className:"relative w-full gizmo:w-fit md:w-1/2 lg:w-1/3 xl:w-1/4",children:[(0,l.jsxs)(o.R.Button,{ref:T,onClick:a?_:C,className:(0,u.default)("relative flex cursor-pointer flex-col bg-white py-2 pr-10 text-left gizmo:text-[15px] gizmo:font-normal dark:bg-gray-800 sm:text-sm","mini"===M?"mx-auto w-auto rounded-lg border border-transparent pl-4 pr-7 hover:border-black/10 gizmo:border-black/10 gizmo:hover:border-black dark:hover:border-white/10 gizmo:dark:border-white/20 gizmo:dark:hover:border-white":"w-full rounded-md border border-black/10 pl-3 focus:border-green-600 focus:outline-none focus:ring-1 focus:ring-green-600 dark:border-white/20"),children:["mini"!==M&&(0,l.jsx)(o.R.Label,{className:"block text-xs text-gray-700 dark:text-gray-500",children:t}),(0,l.jsx)("span",{className:"inline-flex w-full truncate",children:(0,l.jsx)("span",{className:"flex h-6 items-center gap-1 truncate",children:r})}),(0,l.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:D?(0,l.jsx)(v.ud,{}):(0,l.jsx)(h.bTu,{className:"icon-sm text-gray-400","aria-hidden":"true"})})]}),(0,l.jsx)(c.u,{show:a,as:f.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)(R,{ref:I,children:O})})]})});function z(e){var n=e.value,t=e.disabled,r=e.children,a=e.theme;return(0,l.jsx)(o.R.Option,{className:function(e){var n=e.active;return(0,u.default)("mini"===a?E:U,n&&!t?"bg-gray-100 dark:bg-gray-700":"text-gray-900",t&&"cursor-auto bg-gray-50 text-gray-400 dark:bg-gray-700 dark:text-gray-100")},value:n,children:r})}function S(e){var n=e.icon,t=e.className,r=e.theme;return(0,l.jsx)("mini"===r?Y:Q,{children:(0,l.jsx)(n,{className:(0,u.default)("icon-md",t),"aria-hidden":"true"})})}function P(e){var n=e.selected,t=e.disabled;if("mini"===e.theme){var r=(0,u.default)("h-5 w-5 text-blue-600",n?"stroke-[2.5]":"stroke-2");return(0,l.jsxs)(Y,{children:[n?(0,l.jsx)(j.HQ,{className:r}):(0,l.jsx)(j.i9,{className:r}),!n&&(0,l.jsx)(j.nQ,{className:(0,u.default)("icon-md absolute text-blue-600 opacity-0 transition-opacity",!t&&"group-hover:opacity-100")})]})}return(0,l.jsx)(Q,{children:(0,l.jsx)("div",{className:(0,u.default)("flex h-6 w-6 items-center justify-center rounded-full border transition-colors",n?"border-transparent bg-green-600 text-white":"border-black/5 dark:border-white/20"),"aria-hidden":"true",children:(0,l.jsx)(h.UgA,{className:(0,u.default)("h-3 w-3 transition-opacity",n&&"opacity-100",!n&&"opacity-0",!n&&!t&&"group-hover:opacity-50"),strokeWidth:n?2.5:2})})})}function O(e){var n=e.showCheckbox,t=e.theme;return(0,l.jsxs)("div",{className:(0,u.default)("mini"===t?E:U,"cursor-auto"),children:[(0,l.jsxs)(A,{children:[(0,l.jsx)(V,{children:(0,l.jsx)("div",{className:"h-full w-full rounded-sm bg-gray-200"})}),(0,l.jsx)("div",{className:"h-[12px] w-[88px] rounded-sm bg-gray-100"})]}),n&&(0,l.jsx)(P,{theme:t,selected:!1,disabled:!0})]})}function B(e){var n=e.option,t=e.dropdownRef,r=(0,i._)((0,f.useState)(),2),a=r[0],s=r[1];return((0,f.useEffect)(function(){var e=function(){if(t.current){var e=t.current.getBoundingClientRect();s({top:e.top,left:e.left-260,minHeight:e.height})}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[t]),a)?(0,l.jsxs)(H,{style:{width:260,minHeight:a.minHeight,top:a.top,left:a.left},children:[n.disabled&&(0,l.jsx)(d.Z,{className:"icon-lg text-red-700 dark:text-red-500"}),n.imageUrl&&(0,l.jsx)(p.Z,{url:n.imageUrl,name:n.title,size:70}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[n.title," ",n.tags.map(function(e){return L(e)})," ",n.customTags]}),(0,l.jsx)("div",{className:"whitespace-pre-line text-xs",children:n.description})]}):null}var L=function(e){return I.includes(e)&&(0,l.jsx)("span",{className:(0,u.default)("py-0.25 rounded px-1 text-[10px] font-semibold uppercase","confidential"===e&&"bg-red-200 text-red-800","alpha"===e&&"bg-blue-200 text-blue-500","plus"===e&&"bg-yellow-200 text-yellow-900"),children:e},e)},F=m.Z.div(w()),R=(0,m.Z)(F)(k()),H=(0,m.Z)(F)(N()),E="group relative flex h-[50px] cursor-pointer select-none items-center overflow-hidden border-b border-black/10 pl-5 pr-12 last:border-0 dark:border-white/20",U="group relative flex h-[42px] cursor-pointer select-none items-center overflow-hidden border-b border-black/10 pl-3 pr-9 last:border-0 dark:border-white/20",A=m.Z.span(C()),V=m.Z.span(_()),Y=m.Z.span(M()),Q=m.Z.span(T())},66273:function(e,n,t){t.d(n,{B:function(){return X}});var r=t(39324),a=t(22830),i=t(4337),s=t(35250),l=t(32148),o=t(33554),c=t(59837),d=t(77421),u=t(62853),f=t(97296),x=t(5397),h=t.n(x),m=t(10721),g=t(70079),p=t(70671),v=t(32004),b=t(94968),j=t(40803),y=t(62682),w=t(51505),k=t(55548),N=t(17944),C=t(25687),_=t(13246),M=t(94705),T=t(7184),I=t(6013),Z=function(e){var n=e.children,t=e.contentClassName,r=e.content,i=e.side,l=e.sideOffset,o=(0,a._)((0,g.useState)(void 0),2),c=o[0],d=o[1],u=function(){d(!0)},f=function(){d(void 0)};return(0,s.jsxs)(I.fC,{open:c,onOpenChange:function(e){d(!0===e||void 0)},children:[(0,s.jsx)(I.xz,{asChild:!0,onMouseEnter:u,onMouseLeave:f,children:n}),(0,s.jsx)(I.h_,{children:(0,s.jsx)(I.VY,{onMouseEnter:u,onMouseLeave:f,side:i,sideOffset:l,collisionPadding:16,className:t,onOpenAutoFocus:function(e){e.preventDefault()},onCloseAutoFocus:function(e){e.preventDefault()},children:r})})]})},D=t(59904),z=t(86585),S=t(50362),P=t(47478),O=t(1454),B=t(18481),L=t(47428),F=t(88903),R=t(39368),H=t(70496);function E(e){var n=e.icon,t=e.label,r=e.onSelect;return(0,s.jsxs)(L.ck,{onSelect:r,className:"flex cursor-pointer select-none items-center gap-3 px-4 py-2 text-sm text-token-text-secondary outline-none radix-highlighted:bg-gray-50 dark:radix-highlighted:bg-gray-700",children:[(0,s.jsx)(n,{className:"icon-sm"}),(0,s.jsx)("span",{children:t})]})}function U(e){var n=e.conversationTemplate,t=(0,N.ec)(N.F_.accountUserId),r=n.owner_id===t,a=(0,m.useRouter)(),i=(0,N.hz)().has("debug"),l=(0,B.xj)(n.id);return(0,s.jsxs)(L.fC,{children:[(0,s.jsx)(L.xz,{asChild:!0,children:(0,s.jsxs)("button",{className:"flex min-w-[256px] items-center gap-4 overflow-hidden rounded p-2 text-left hover:bg-gray-50 radix-state-open:bg-gray-50 dark:hover:bg-gray-700 dark:radix-state-open:bg-gray-700 lg:-ml-2",children:[(0,s.jsx)(F.Py,{conversationTemplate:n}),(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-token-text-primary",children:n.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-token-text-tertiary",children:[(0,s.jsxs)("span",{children:["Template by ",n.author_name]}),null!=n.published_at?null!=n.description?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:"max-w-[160px] overflow-hidden overflow-ellipsis whitespace-nowrap",children:n.description})]}):null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:"Private"})]})]})]}),(0,s.jsx)(O.bTu,{className:"icon-sm text-token-text-tertiary"})]})}),(0,s.jsx)(L.Uv,{children:(0,s.jsxs)(L.VY,{className:"min-w-[256px] max-w-[320px] rounded-md border border-gray-100 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800",align:"start",side:"bottom",sideOffset:4,children:[(0,s.jsxs)(L.__,{className:"border-b border-gray-200 p-4 dark:border-gray-700",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-token-text-primary",children:n.name}),(0,s.jsx)("div",{className:"mt-1 flex items-center gap-1 text-xs text-token-text-tertiary",children:null!=n.published_at?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O._rq,{className:"icon-xs"}),(0,s.jsx)("span",{children:"Published in workspace"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.UIZ,{className:"icon-xs"}),(0,s.jsxs)("span",{children:["Private",r&&(0,s.jsx)("span",{children:" (Only visible to you)"})]})]})}),null!=n.published_at&&null!=n.description&&(0,s.jsx)("div",{className:"mt-1 text-xs text-token-text-secondary line-clamp-3",children:n.description})]}),(0,s.jsxs)(L.ZA,{className:"py-1",children:[(0,s.jsx)(E,{icon:O.IC0,label:"New chat with this template",onSelect:function(){a.push((0,R.l1)(n.id),void 0,{shallow:!0})}}),r?(0,s.jsx)(E,{icon:O.IYd,label:"Edit template",onSelect:function(){a.push(l,void 0,{shallow:!0})}}):(0,s.jsx)(E,{icon:O.rDJ,label:"See how it's made",onSelect:function(){(0,H.O)(n.id)}}),i&&(0,s.jsx)(E,{icon:O.cDN,label:"Debug",onSelect:function(){return k.vm.toggleActiveSidebar("debug")}})]})]})})]})}function A(e){var n=e.workspaceId,t=e.conversationTemplateId,r=(0,R.GS)(n,t,{includeDeleted:!0}).data;return(0,s.jsx)("div",{className:"flex min-h-[60px] justify-center border-b border-gray-100 dark:border-gray-700",children:(0,s.jsx)("div",{className:"flex w-full items-center px-2 md:max-w-2xl lg:max-w-[38rem] lg:px-0 xl:max-w-3xl",children:null!=r?(0,s.jsx)(U,{conversationTemplate:r}):null})})}var V=t(74329),Y=t(15635),Q=t(23234),G=t(11547);function W(){var e=(0,i._)(["translateY(",")"]);return W=function(){return e},e}var q=h()(function(){return Promise.all([t.e(8682),t.e(1438),t.e(5427),t.e(5526),t.e(3694),t.e(9678)]).then(t.bind(t,84147)).then(function(e){return e.GizmoConversationHeader})},{loadableGenerated:{webpack:function(){return[84147]}}}),J=h()(function(){return Promise.all([t.e(8682),t.e(1438),t.e(5427),t.e(5526),t.e(3694),t.e(9678)]).then(t.bind(t,84147)).then(function(e){return e.DefaultAssistantConversationHeader})},{loadableGenerated:{webpack:function(){return[84147]}}}),K=[0,60],$=function(e){var n=e.clientThreadId,t=(0,p.Z)(),r=null!==(0,g.useContext)(C.gB),a=(0,N.hz)(),i=w.tQ.getServerThreadId(n),l=(!(0,N.ec)(N.F_.isBusinessWorkspace)||a.has(y.L0.WorkspaceShareLinks))&&a.has(y.RJ);return!r&&void 0!==i&&l?(0,s.jsx)(Y.u,{side:"left",label:t.formatMessage(er.shareChat),children:(0,s.jsx)(V.O,{onClick:function(){return k.vm.openSharingModal(i)},"aria-label":t.formatMessage(er.shareChat),children:(0,s.jsx)(O.A8q,{className:"icon-sm"})})}):null};function X(e){var n=e.currentModelConfig,t=e.clientThreadId,r=e.gizmoId,a=e.icon,i=(0,w.UL)(t),l=(0,N.ec)(function(e){var n;return null===(n=e.currentWorkspace)||void 0===n?void 0:n.id}),o=(0,Q.Ml)(),c=null!==(0,g.useContext)(C.gB);if(o&&!c){var d,u=null!==(d=i.conversationTemplateId)&&void 0!==d?d:r;return null==u?(0,s.jsx)(J,{currentModelConfig:n,clientThreadId:t}):(0,s.jsx)(q,{gizmoId:u,clientThreadId:t})}return(0,s.jsx)(ee,{children:null!=l&&null!=i.conversationTemplateId?(0,s.jsx)(A,{clientThreadId:t,workspaceId:l,conversationTemplateId:i.conversationTemplateId}):(0,s.jsx)(en,{currentModelConfig:n,clientThreadId:t,icon:a})})}function ee(e){var n=e.children,t=(0,k.tN)(k.bM.isThreadHeaderVisible),r=(0,o.c)(0),i=(0,g.useRef)(null),l=(0,g.useRef)(null),x=(0,a._)((0,j.useAtTop)(),1)[0],h=(0,g.useCallback)(function(e){var n=e.scrollTop;if(null==i.current||i.current===n){i.current=n;return}if(l.current=i.current,i.current=n,l.current>i.current){k.vm.showThreadHeader();var t=Math.max(K[0],r.get()-Math.abs(l.current-i.current));t!==r.get()&&r.set(t)}else{var a=Math.min(K[1],r.get()+Math.abs(l.current-i.current));a!==r.get()&&r.set(a)}},[r]),m=(0,c.H)(r,K,["0%","-100%"]),p=(0,a._)((0,g.useState)(m.get()),2),v=(p[0],p[1]);(0,d.W)(m,"change",function(e){v(e)});var b=(0,u.Y)(W(),m);(0,g.useEffect)(function(){k.vm.showThreadHeader()},[]);var y=null!==(0,g.useContext)(C.gB);return(0,j.useObserveScrollPosition)(y?void 0:h),(0,s.jsx)(f.E.header,{animate:t?void 0:{top:t?0:"-90px",transition:{duration:.2,ease:"easeIn"}},style:{boxShadow:!x&&t?"0px 4px 24px 0px #0000000D":void 0,transform:t?b:void 0},className:"sticky top-0 z-10 w-full bg-white dark:bg-gray-800",children:n})}function en(e){var n,t,a,i=e.currentModelConfig,l=e.clientThreadId,o=e.icon,c=(0,p.Z)(),d=null!==(0,g.useContext)(C.gB),u=(0,k.tN)(function(e){return"debug"===e.activeSidebar}),f=(0,N.hz)(),x=f.has("debug")&&!u,h=[];x&&h.push((0,s.jsx)(Y.u,{side:"left",label:c.formatMessage(er.openDebug),children:(0,s.jsx)(V.O,{onClick:function(){return k.vm.toggleActiveSidebar("debug")},"aria-label":c.formatMessage(er.openDebug),children:(0,s.jsx)(O.cDN,{className:"icon-sm"})})})),h.push((0,s.jsx)($,{clientThreadId:l}));var b=(0,w.Qi)(l),j=null!=b,I=j&&null==b.aboutModelMessage&&null==b.aboutUserMessage&&null!==b.shareId,Z=f.has(y.b5),D=(0,w.Ro)(l);void 0===D&&(D=i);var B=D.tags.filter(function(e){return S.D2.includes(e)}).map(function(e){return(0,S.Vp)(e)}),L=d?D.title:i.title,F=(0,z.i)(l);if(F.length>0){var R=F.map(function(e,n){return(0,s.jsx)(_.Z,{url:e.manifest.logo_url,name:e.manifest.name_for_human,size:16},n)});a=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,(0,r._)({},er.enabledPlugins))}),R]})}var H=(0,m.useRouter)(),E=d&&(null===(n=H.query)||void 0===n?void 0:null===(t=n.shareParams)||void 0===t?void 0:t[1])==="moderate",U=(0,k.tN)(function(e){return e.activeModals.has(k.B.DownloadMessages)}),A=w.tQ.getThreadCurrentLeafId(l),Q=(0,w.u9)(l,A),G=(0,g.useCallback)(function(){Z&&(0,P.Ub)(l,Q)},[l,Z,Q]);return(0,s.jsxs)(s.Fragment,{children:[Z&&(0,s.jsx)(T.Z,{type:"success",isOpen:U,onClose:function(){k.vm.closeModal(k.B.DownloadMessages)},closeButton:(0,s.jsx)(M.ZP.CloseButton,{onClose:function(){k.vm.closeModal(k.B.DownloadMessages)}}),primaryButton:(0,s.jsx)(M.ZP.Button,{onClick:G,children:(0,s.jsx)(v.Z,(0,r._)({},er.downloadButton))}),title:c.formatMessage(er.downloadChatDebugInfo),secondaryButton:(0,s.jsx)(M.ZP.Button,{onClick:function(){k.vm.closeModal(k.B.DownloadMessages)},children:(0,s.jsx)(v.Z,(0,r._)({},er.cancelButton))})}),(0,s.jsxs)("div",{className:"relative z-20 flex min-h-[60px] flex-wrap items-center justify-between gap-3 border-b border-black/10 bg-white p-2 text-gray-500 dark:border-gray-900/50 dark:bg-gray-800 dark:text-gray-300",onClick:function(e){Z&&!d&&3===e.detail&&k.vm.openModal(k.B.DownloadMessages)},children:[(0,s.jsx)("div",{className:"hidden flex-shrink flex-row sm:flex",children:h.map(function(e,n){return(0,s.jsx)(V.h,{},n)})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-grow items-center gap-1 px-2 py-1 text-gray-600 dark:text-gray-200 sm:justify-center sm:p-0",children:[d&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)("span",{children:(0,s.jsx)(v.Z,(0,r._)({},er.sharedChat))}),(0,s.jsx)("span",{className:"px-1",children:"•"})]}),!d&&null!=o&&(0,s.jsx)(o,{className:"icon-sm"}),(0,s.jsx)("span",{children:L}),B,a?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)("span",{className:"px-1",children:"•"}),a]}):null,E&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)("span",{className:"px-1",children:"•"}),(0,s.jsx)("strong",{children:(0,s.jsx)(v.Z,(0,r._)({},er.moderationView))})]}),!d&&j&&!I&&(0,s.jsx)("div",{className:"",children:(0,s.jsx)(et,{clientThreadId:l})})]}),(0,s.jsx)("div",{className:"flex flex-shrink flex-row",children:h.map(function(e,n){return(0,s.jsx)("span",{children:e},n)})})]})]})}var et=function(e){var n=e.clientThreadId,t=(0,w.Qi)(n),a=(0,g.useMemo)(function(){if(null==t)return null;var e=t.aboutUserMessage,n=t.aboutModelMessage,a=t.fallback;return null!=e&&null!=n?(0,s.jsxs)("div",{className:"flex flex-col gap-7",children:[null!==e&&""!==e&&(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-600 dark:text-gray-200",children:(0,s.jsx)(v.Z,(0,r._)({},G.sY.aboutYouHelpText))}),(0,s.jsx)("div",{className:"flex flex-row gap-1 text-gray-500",children:e})]}),null!==n&&""!==n&&(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-600 dark:text-gray-200",children:(0,s.jsx)(v.Z,(0,r._)({},G.sY.modelHelpText))}),(0,s.jsx)("div",{className:"flex flex-row gap-1 text-gray-500",children:n})]})]}):null!=a?a:null},[t]);return null===t?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Z,{contentClassName:"relative max-h-[450px] min-w-[300px] max-w-[350px] animate-slideDownAndFade select-none overflow-y-auto whitespace-pre-line rounded-xl border-gray-100 bg-white p-4 text-sm text-gray-600 shadow-xs dark:bg-gray-900 dark:text-white sm:max-w-lg md:max-w-xl",side:"bottom",sideOffset:8,content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-5 mt-1 border-b border-black/10 pb-5 dark:border-white/10",children:(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 text-gray-500",children:(0,s.jsx)(v.Z,(0,r._)({},er.chatPreferencesNote))})}),a]}),children:(0,s.jsxs)("div",{className:"cursor-pointer pt-0.5",children:[(0,s.jsx)(D.HV,{className:"h-4 w-4 flex-shrink-0 sm:mb-0.5 sm:h-5 sm:w-5"}),(0,s.jsx)(l.T,{children:(0,s.jsx)(v.Z,(0,r._)({},er.chatPreferencesInfoLabel))})]})})})},er=(0,b.vU)({chatPreferencesInfoLabel:{id:"ThreadSettings.chatPreferencesInfoLabel",defaultMessage:"Custom instructions details",description:"Label for the Custom instructions info icon"},chatPreferencesNote:{id:"ThreadSettings.chatPreferencesNote",defaultMessage:"Custom instructions are on and can only be changed at the beginning of the chat.",description:"Label in the popover for Custom Instructions"},openDebug:{id:"ThreadSettings.openDebug",defaultMessage:"Open debug sidebar",description:"Open debug sidebar button tooltip"},shareChat:{id:"ThreadSettings.shareChat",defaultMessage:"Share chat",description:"Open share modal button tooltip"},sharedChat:{id:"ThreadHeader.sharedChat",defaultMessage:"Shared Chat",description:"Label for shared chat status"},enabledPlugins:{id:"ThreadHeader.enabledPlugins",defaultMessage:"Enabled plugins:",description:"Label for enabled plugins in the header"},moderationView:{id:"ThreadHeader.moderationView",defaultMessage:"MODERATION VIEW",description:"Label for moderation view status"},downloadChatDebugInfo:{id:"ThreadHeader.downloadChatDebugInfo",defaultMessage:"Download chat debug info",description:"Title for the Download chat debug info modal"},downloadButton:{id:"ThreadHeader.downloadButton",defaultMessage:"Download",description:"Download button text in the Download chat debug info modal"},cancelButton:{id:"ThreadHeader.cancelButton",defaultMessage:"Cancel",description:"Cancel button text in the Download chat debug info modal"}})},23211:function(e,n,t){t.d(n,{D:function(){return r},z:function(){return a}});var r="ChatGPT",a="Untitled"},11322:function(e,n,t){t.d(n,{$:function(){return l},o:function(){return c}});var r=t(35250),a=t(19841),i=t(59904),s=t(21950);function l(e){var n=e.gizmo,t=e.className;return(0,r.jsx)("div",{className:(0,a.default)("gizmo-shadow-stroke rounded-full",t),children:null==n?(0,r.jsx)("div",{className:"flex h-full items-center justify-center rounded-full bg-white text-black",children:(0,r.jsx)(i.nI,{className:"h-2/3 w-2/3"})}):null!=n.profile_pic_permalink?(0,r.jsx)("img",{src:n.profile_pic_permalink,alt:n.name,className:"h-full overflow-hidden rounded-full object-cover"}):null})}function o(e){var n=e.gizmoId,t=e.className,a=(0,s.b9)(n).data;return null==a?(0,r.jsx)("div",{className:t}):(0,r.jsx)(l,{gizmo:a,className:t})}function c(e){var n=e.gizmoId,t=e.className;return null==n?(0,r.jsx)(l,{gizmo:void 0,className:t}):(0,r.jsx)(o,{gizmoId:n,className:t})}},69789:function(e,n,t){t.d(n,{C:function(){return c}});var r=t(39324),a=t(71209),i=t(91530),s=t.n(i),l=t(78103),o={showReferralInviteModal:!1},c=(0,l.ZP)()(function(e){return(0,a._)((0,r._)({},o),{setShowReferralInviteModal:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();e({showReferralInviteModal:n}),null==t||t()}})})},86585:function(e,n,t){t.d(n,{i:function(){return h}});var r=t(21722),a=t(20485),i=t(38104),s=t(86646),l=t(51505),o=t(82473),c=t(61236),d=t(56457),u=t(21613);function f(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return n=e.queryKey,[4,s.ZP.publicGetPluginsById({ids:n})];case 1:return[2,t.sent().items]}})})).apply(this,arguments)}function h(e){var n,t,r;return null!==(n=(t=(0,l.GR)(e),r=(0,o.NL)(),(0,c.a)({queryKey:t,queryFn:f,initialData:function(){var e=null===(c=r.getQueryData(u.Z))||void 0===c?void 0:c.items,n=null===(f=r.getQueryData(d.V))||void 0===f?void 0:f.items,i=[],s=!0,l=!1,o=void 0;try{for(var c,f,x,h=t[Symbol.iterator]();!(s=(x=h.next()).done);s=!0){var m=function(){var t,r=x.value,a=null!==(t=null==e?void 0:e.find(function(e){return e.id===r}))&&void 0!==t?t:null==n?void 0:n.find(function(e){return e.id===r});if(null==a)return{v:void 0};i.push(a)}();if("object"===(0,a._)(m))return m.v}}catch(e){l=!0,o=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw o}}return i}})).data)&&void 0!==n?n:[]}},25063:function(e,n,t){t.d(n,{g:function(){return o}});var r=t(96237),a=t(39324),i=t(71209),s=t(78103),l={flags:{isUserInCanPayGroup:!1,failwhaleBypassEnabled:!1,sharingEnabled:!1}},o=(0,s.ZP)()(function(e,n){return(0,i._)((0,a._)({},l),{updateFlagValue:function(t,s){var l=n().flags;e({flags:(0,i._)((0,a._)({},l),(0,r._)({},t,s))})}})})},84844:function(e,n,t){t.d(n,{LW:function(){return i},eR:function(){return a}});var r=t(22830);function a(e,n){var t=!0,a=!1,i=void 0;try{for(var s,l=Object.entries(n)[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=(0,r._)(s.value,2),c=o[0],d=o[1];e.addEventListener(c,d)}}catch(e){a=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}return function(){var t=!0,a=!1,i=void 0;try{for(var s,l=Object.entries(n)[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=(0,r._)(s.value,2),c=o[0],d=o[1];e.removeEventListener(c,d)}}catch(e){a=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}}}function i(e,n){var t=!0,a=!1,i=void 0;try{for(var s,l=Object.entries(n)[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=(0,r._)(s.value,2),c=o[0],d=o[1];e.on(c,d)}}catch(e){a=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}return function(){var t=!0,a=!1,i=void 0;try{for(var s,l=Object.entries(n)[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=(0,r._)(s.value,2),c=o[0],d=o[1];e.off(c,d)}}catch(e){a=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}}}},4263:function(e,n,t){t.d(n,{V:function(){return s}});var r=t(51217),a=t(36560),i=t.n(a),s=function(){function e(){(0,r._)(this,e),this.emitter=new(i()),this.emitter.setMaxListeners(1e3)}var n=e.prototype;return n.on=function(e,n){this.emitter.on(e,n)},n.off=function(e,n){this.emitter.off(e,n)},n.publish=function(e){this.emitter.emit(e.kind,e),this.emitter.emit("anyEvent",e)},e}()}}]);